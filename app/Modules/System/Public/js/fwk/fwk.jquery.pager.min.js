$(function(e){var t=this;t.get=function(t,n,r){e.ajax(r.src,{dataType:"json",method:"post",data:e.extend({page:r.page},r.extraParams),success:function(i){if(i.elements.length>0){var s=t.data("target");e.each(i.elements,function(n,o){var u={};e.each(r.globalVars,function(e,t){u[e]=t}),u.element=o,e.when(e(s).append(r.template.render(u))).then(function(){r.onAppend(o)}),i.addMore||t.addClass("hidden")})}else t.addClass("hidden");r.page++,r.callback(i.elements),n()},error:function(){r.onError()}})},e.fn.pager=function(n){var r=this,i=e.extend({page:1,src:"/"+e(r).data("src").replace("_","/").replace("_","/"),template:null,globalVars:{},extraParams:{},callback:function(e){},onAppend:function(e){},onError:function(){}},n);return e(r).each(function(n){e(r).data("$pager",t.settings),e(this).on("click",function(n){n.preventDefault();var s=e(r).html();e(r).html('<i class="fa fa-spinner spinner fa-spin"></i>'),t.get(r,function(){e(r).html(s)},i)})})}}(jQuery));