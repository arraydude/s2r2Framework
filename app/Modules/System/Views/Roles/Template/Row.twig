{% for role in roles %}
<tr>
    <td>
        {% for i in range(0, level) %}&nbsp;&nbsp;&nbsp;&nbsp;{% endfor %}{{ role.name }}
    </td>
    <td style="width: 20%;">
        <a href="#" class="table-link" data-show-privileges data-role-id="{{ role.role_id }}" data-toggle="tooltip" data-placement="left" title="Watch privileges">
            <span class="fa-stack">
                <i class="fa fa-square fa-stack-2x"></i>
                <i class="fa fa-search-plus fa-stack-1x fa-inverse"></i>
            </span>
        </a>
        {% if has_privilege('edit') %}
        <a href="/system/roles/edit?roleId={{ role.role_id }}" class="table-link" data-toggle="tooltip" data-placement="top" title="Edit">
            <span class="fa-stack">
                <i class="fa fa-square fa-stack-2x"></i>
                <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
            </span>
        </a>
        {% endif %}
        <a href="#" class="table-link red" data-delete-role data-role-id="{{ role.role_id }}" data-toggle="tooltip" data-placement="right" title="Delete">
            <span class="fa-stack">
                <i class="fa fa-square fa-stack-2x"></i>
                <i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
            </span>
        </a>
    </td>
</tr>

{% include ('@SystemModule/Roles/Template/Row.twig') with {'roles': role.children, 'level': level + 1} %}
{% endfor %}